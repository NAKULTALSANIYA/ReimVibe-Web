import{j as e,m as s,P as t,g as a,T as l}from"./ui-vendor-BxZ4Xgry.js";import{r as i}from"./react-vendor--as-ZyZY.js";import{a as r}from"./api-DMg9Yiwh.js";import{y as c}from"./util-vendor-Ik_Or1do.js";import{l as o}from"./react-confirm-alert-BemBkvux.js";import"./http-vendor-DypGwsJR.js";import"./chart-vendor-DqVrzz_A.js";function d(){const[d,n]=i.useState([]),[u,p]=i.useState(!0),[m,h]=i.useState(null),[x,g]=i.useState({title:"",description:""}),[v,b]=i.useState(!1),[f,y]=i.useState(null),[j,w]=i.useState(!1),[N,S]=i.useState(null);i.useEffect(()=>{C()},[]);const C=async()=>{try{const e=await r.get("/services");n(e.data.data||[])}catch(e){h(e.response?.data?.message||e.message)}finally{p(!1)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Manage Services"}),e.jsxs(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-yellow-400 text-black px-4 py-2 rounded-lg font-semibold hover:bg-yellow-300 transition-colors flex items-center gap-2",onClick:()=>b(!0),children:[e.jsx(t,{size:16}),"Add New"]})]}),u?e.jsx("p",{children:"Loading services..."}):m?e.jsx("p",{className:"text-red-500",children:m}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:d.map(t=>e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[e.jsx("h2",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-gray-500",children:t.description}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs(s.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-1 px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",onClick:()=>{return g({title:(e=t).title,description:e.description}),y(e),void b(!0);var e},children:[e.jsx(a,{size:16}),"Edit"]}),e.jsxs(s.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{return e=t._id,void o.confirmAlert({title:"Confirm Delete",message:"Are you sure you want to delete this service?",buttons:[{label:"Yes",onClick:async()=>{S(e);try{await r.delete(`/services/${e}`),await C(),c.success("Service deleted successfully!")}catch(s){c.error(s.response?.data?.message||s.message)}finally{S(null)}}},{label:"No"}]});var e},disabled:N===t._id,children:[e.jsx(l,{size:16}),N===t._id?"Deleting...":"Delete"]})]})]},t._id))}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl w-96 shadow-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:f?"Edit Service":"Add New Service"}),e.jsxs("form",{onSubmit:f?async e=>{e.preventDefault(),w(!0);try{await r.put(`/services/${f._id}`,x),await C(),g({title:"",description:""}),y(null),b(!1),c.success("Service updated successfully!")}catch(s){c.error(s.response?.data?.message||s.message)}finally{w(!1)}}:async e=>{e.preventDefault(),w(!0);try{await r.post("/services",x),await C(),g({title:"",description:""}),b(!1),c.success("Service added successfully!")}catch(s){c.error(s.response?.data?.message||s.message)}finally{w(!1)}},className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Service Title",value:x.title,onChange:e=>g({...x,title:e.target.value}),className:"w-full border p-2 rounded-md",required:!0}),e.jsx("textarea",{placeholder:"Service Description",value:x.description,onChange:e=>g({...x,description:e.target.value}),className:"w-full border p-2 rounded-md",required:!0}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:()=>{b(!1),y(null),g({title:"",description:""})},className:"px-4 py-2 rounded-lg border hover:bg-gray-100 transition-colors",children:"Cancel"}),e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:j,className:"bg-yellow-400 px-6 py-2 rounded-lg font-semibold hover:bg-yellow-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:j?"Saving...":f?"Update":"Save"})]})]})]})})]})}export{d as default};
