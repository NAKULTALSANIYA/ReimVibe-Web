import{r as a,a as x,j as e,y as h}from"./index-BwYdblA9.js";import{T as w,l as v}from"./react-confirm-alert-CIYP-H3n.js";import{m}from"./proxy-KUc6fMt2.js";import{E as k}from"./eye-C8c2jHZ8.js";function E(){const[p,j]=a.useState([]),[g,u]=a.useState(!0),[l,y]=a.useState(null),[f,n]=a.useState(!1),[t,r]=a.useState(null),[i,c]=a.useState(null);a.useEffect(()=>{o()},[]);const o=async()=>{try{const s=await x.get("/contacts");j(s.data.data||[])}catch(s){y(s.response?.data?.message||s.message)}finally{u(!1)}},N=s=>{r(s),n(!0)},b=s=>{v.confirmAlert({title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"warning-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),e.jsx("span",{children:"Delete Message?"})]}),message:e.jsxs("div",{className:"custom-confirm-dialog",children:[e.jsx("p",{className:"text-gray-600",children:"Are you sure you want to permanently delete this message?"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"This action cannot be undone."})]}),buttons:[{label:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),"Delete"]}),onClick:async()=>{c(s);try{await x.delete(`/contacts/${s}`),await o(),h.success("Message deleted successfully!")}catch(d){h.error(d.response?.data?.message||d.message)}finally{c(null)}}},{label:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"Cancel"]})}],closeOnEscape:!0,closeOnClickOutside:!0,overlayClassName:"confirm-overlay"})};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Manage Messages"}),g?e.jsx("p",{children:"Loading messages..."}):l?e.jsx("p",{className:"text-red-500",children:l}):e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2",children:"Name"}),e.jsx("th",{className:"py-2",children:"Email"}),e.jsx("th",{className:"py-2",children:"Phone"}),e.jsx("th",{className:"py-2",children:"Date"}),e.jsx("th",{className:"py-2",children:"Actions"})]})}),e.jsx("tbody",{children:p.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:s.name}),e.jsx("td",{className:"py-2",children:s.email}),e.jsx("td",{className:"py-2",children:s.phone}),e.jsx("td",{className:"py-2",children:new Date(s.createdAt).toLocaleDateString()}),e.jsxs("td",{className:"py-2 space-x-3 flex items-center gap-2",children:[e.jsxs(m.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-1 px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",onClick:()=>N(s),children:[e.jsx(k,{size:16}),"View"]}),e.jsxs(m.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>b(s.id),disabled:i===s.id,className:"flex items-center gap-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(w,{size:16}),i===s.id?"Deleting...":"Delete"]})]})]},s.id))})]})}),f&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl w-96 shadow-lg max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Message Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",t.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",t.phone]}),e.jsx("p",{children:e.jsx("strong",{children:"Message:"})}),e.jsx("p",{className:"bg-gray-100 p-3 rounded",children:t.message}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(t.createdAt).toLocaleString()]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:()=>{n(!1),r(null)},className:"px-4 py-2 rounded-md border",children:"Close"})})]})})]})}export{E as default};
