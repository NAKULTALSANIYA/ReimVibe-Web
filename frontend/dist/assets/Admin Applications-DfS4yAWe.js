import{j as e,m as s,T as a}from"./ui-vendor-BxZ4Xgry.js";import{r as t}from"./react-vendor--as-ZyZY.js";import{a as l}from"./api-DMg9Yiwh.js";import{y as i}from"./util-vendor-Ik_Or1do.js";import{l as c}from"./react-confirm-alert-BemBkvux.js";import"./http-vendor-DypGwsJR.js";import"./chart-vendor-DqVrzz_A.js";function n(){const[n,d]=t.useState([]),[r,o]=t.useState(!0),[p,m]=t.useState(null),[u,h]=t.useState(null),[j,x]=t.useState(null);t.useEffect(()=>{y()},[]);const y=async()=>{try{const e=await l.get("/applications");e.data.data?d(e.data.data):(d([]),m(e.data.message||"No applications found"))}catch(e){m(e.response?.data?.message||e.message)}finally{o(!1)}};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Manage Applications"}),r?e.jsx("p",{children:"Loading applications..."}):p?e.jsx("p",{className:"text-red-500",children:p}):e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2",children:"Name"}),e.jsx("th",{className:"py-2",children:"Email"}),e.jsx("th",{className:"py-2",children:"Job"}),e.jsx("th",{className:"py-2",children:"Date & Time"}),e.jsx("th",{className:"py-2",children:"Status"}),e.jsx("th",{className:"py-2",children:"Actions"})]})}),e.jsx("tbody",{children:n.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:t.name}),e.jsx("td",{className:"py-2",children:t.email}),e.jsx("td",{className:"py-2",children:t.jobId?.title||"N/A"}),e.jsx("td",{className:"py-2",children:new Date(t.createdAt).toLocaleString()}),e.jsx("td",{className:"py-2",children:e.jsxs(s.select,{value:t.status,onChange:e=>(async(e,s)=>{h(e);try{await l.put(`/applications/${e}/status`,{status:s}),await y(),i.success("Application status updated successfully!")}catch(a){i.error(a.response?.data?.message||a.message)}finally{h(null)}})(t._id,e.target.value),disabled:u===t._id,className:"border p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",whileHover:{scale:1.05},children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Accepted",children:"Accepted"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs(s.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{return e=t._id,void c.confirmAlert({title:"Confirm Delete",message:"Are you sure you want to delete this application?",buttons:[{label:"Yes",onClick:async()=>{x(e);try{await l.delete(`/applications/${e}`),await y(),i.success("Application deleted successfully!")}catch(s){i.error(s.response?.data?.message||s.message)}finally{x(null)}}},{label:"No"}]});var e},disabled:j===t._id,className:"flex items-center gap-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(a,{size:16}),j===t._id?"Deleting...":"Delete"]})})]},t._id))})]})})]})}export{n as default};
