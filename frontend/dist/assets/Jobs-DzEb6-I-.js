import{j as e,m as s,g as a,T as t,E as l}from"./ui-vendor-BxZ4Xgry.js";import{e as d,r as i}from"./react-vendor--as-ZyZY.js";import{y as n}from"./util-vendor-Ik_Or1do.js";import{l as r}from"./react-confirm-alert-BemBkvux.js";import{a as o}from"./api-DMg9Yiwh.js";import"./chart-vendor-DqVrzz_A.js";import"./http-vendor-DypGwsJR.js";function c(){const c=d(),[m,j]=i.useState([]),[h,x]=i.useState(!0),[p,u]=i.useState(null),[y,b]=i.useState(null);i.useEffect(()=>{N()},[]);const N=async()=>{try{const e=await o.get("/jobs");e.data.data?j(e.data.data):(j([]),u(e.data.message||"No jobs found"))}catch(e){u(e.response?.data?.message||e.message),n.error(e.response?.data?.message||e.message)}finally{x(!1)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Manage Jobs"}),e.jsx("button",{className:"bg-yellow-400 text-black px-4 py-2 rounded-md font-semibold hover:bg-yellow-300",onClick:()=>c("/admin/jobs/add"),children:"+ Add New"})]}),h?e.jsx("p",{children:"Loading jobs..."}):p?e.jsx("p",{className:"text-red-500",children:p}):e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2",children:"Title"}),e.jsx("th",{className:"py-2",children:"Type"}),e.jsx("th",{className:"py-2",children:"Location"}),e.jsx("th",{className:"py-2",children:"Status"}),e.jsx("th",{className:"py-2",children:"Actions"})]})}),e.jsx("tbody",{children:m.map((d,i)=>e.jsxs(s.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*i},className:"border-t",children:[e.jsx("td",{className:"py-2",children:d.title}),e.jsx("td",{className:"py-2",children:d.type}),e.jsx("td",{className:"py-2",children:d.location}),e.jsx("td",{className:"py-2",children:d.status}),e.jsxs("td",{className:"py-2 space-x-3",children:[e.jsx("button",{className:"text-blue-500 hover:underline",onClick:()=>c(`/admin/jobs/edit/${d._id}`),children:e.jsx(a,{})}),e.jsx("button",{className:"text-red-500 hover:underline disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>(async e=>{r.confirmAlert({title:"Confirm Delete",message:"Are you sure you want to delete this job?",buttons:[{label:"Yes",onClick:async()=>{b(e);try{await o.delete(`/jobs/${e}`),n.success("Job deleted successfully!"),await N()}catch(s){n.error(s.response?.data?.message||s.message)}finally{b(null)}}},{label:"No"}]})})(d._id),disabled:y===d._id,children:y===d._id?"Deleting...":e.jsx(t,{})}),e.jsx("button",{className:"text-green-500 hover:underline",onClick:()=>c(`/admin/jobs/view/${d._id}`),children:e.jsx(l,{})})]})]},d._id))})]})})]})}export{c as default};
