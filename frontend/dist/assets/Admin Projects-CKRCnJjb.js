import{c as C,r as l,j as t,y as o}from"./index-DAMVDUDG.js";import{a as u}from"./api-BaoFEcul.js";import{T as E,l as q}from"./react-confirm-alert-C8_X-r1t.js";import{m as r}from"./proxy-DKL8Unjh.js";import{P as L}from"./plus-_67RXTcL.js";import{S as T}from"./square-pen-DbwkRqJD.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],D=C("external-link",_);function U(){const[f,b]=l.useState([]),[w,y]=l.useState(!0),[g,v]=l.useState(null),[s,a]=l.useState({title:"",description:"",image:"",link:""}),[N,n]=l.useState(!1),[c,d]=l.useState(null),[p,h]=l.useState(!1),[x,j]=l.useState(null);l.useEffect(()=>{m()},[]);const m=async()=>{try{const e=await u.get("/projects");b(e.data.data||[])}catch(e){v(e.response?.data?.message||e.message)}finally{y(!1)}},k=async e=>{e.preventDefault(),h(!0);try{c?(await u.put(`/projects/${c._id}`,s),o.success("Project updated successfully!")):(await u.post("/projects",s),o.success("Project added successfully!")),await m(),a({title:"",description:"",image:"",link:""}),d(null),n(!1)}catch(i){o.error(i.response?.data?.message||i.message)}finally{h(!1)}},P=e=>{a({title:e.title,description:e.description,image:e.image,link:e.link}),d(e),n(!0)},S=e=>{q.confirmAlert({title:"Confirm Delete",message:"Are you sure you want to delete this project?",buttons:[{label:"Yes",onClick:async()=>{j(e);try{await u.delete(`/projects/${e}`),await m(),o.success("Project deleted successfully!")}catch(i){o.error(i.response?.data?.message||i.message)}finally{j(null)}}},{label:"No"}]})};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Manage Projects"}),t.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-yellow-400 text-black px-4 py-2 rounded-lg font-semibold hover:bg-yellow-300 transition-colors flex items-center gap-2",onClick:()=>{a({title:"",description:"",image:"",link:""}),d(null),n(!0)},children:[t.jsx(L,{size:16}),"Add New"]})]}),w?t.jsx("p",{children:"Loading projects..."}):g?t.jsx("p",{className:"text-red-500",children:g}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:f.map(e=>t.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md",children:[e.image&&t.jsx("img",{src:e.image,alt:e.title,className:"w-full h-40 object-cover rounded-md mb-3"}),t.jsx("h2",{className:"font-semibold text-lg",children:e.title}),t.jsx("p",{className:"text-gray-500 text-sm",children:e.description}),t.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.link&&t.jsxs(r.a,{whileHover:{scale:1.05},to:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 font-semibold hover:underline flex items-center gap-1",children:[t.jsx(D,{size:16}),"Live"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(r.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-1 px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",onClick:()=>P(e),children:[t.jsx(T,{size:16}),"Edit"]}),t.jsxs(r.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>S(e._id),disabled:x===e._id,children:[t.jsx(E,{size:16}),x===e._id?"Deleting...":"Delete"]})]})]})]},e._id))}),N&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white p-6 rounded-xl w-96 shadow-lg",children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:c?"Edit Project":"Add New Project"}),t.jsxs("form",{onSubmit:k,className:"space-y-3",children:[t.jsx("input",{type:"text",placeholder:"Project Title",value:s.title,onChange:e=>a({...s,title:e.target.value}),className:"w-full border p-2 rounded-md",required:!0}),t.jsx("textarea",{placeholder:"Project Description",value:s.description,onChange:e=>a({...s,description:e.target.value}),className:"w-full border p-2 rounded-md",required:!0}),t.jsx("input",{type:"text",placeholder:"Image URL",value:s.image,onChange:e=>a({...s,image:e.target.value}),className:"w-full border p-2 rounded-md",required:!0}),t.jsx("input",{type:"url",placeholder:"Live Project Link",value:s.link,onChange:e=>a({...s,link:e.target.value}),className:"w-full border p-2 rounded-md",required:!0}),t.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[t.jsx(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:()=>{n(!1),d(null),a({title:"",description:"",image:"",link:""})},className:"px-4 py-2 rounded-lg border hover:bg-gray-100 transition-colors",children:"Cancel"}),t.jsx(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:p,className:"bg-yellow-400 px-6 py-2 rounded-lg font-semibold hover:bg-yellow-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving...":c?"Update":"Save"})]})]})]})})]})}export{U as default};
