import{r as a,a as n,j as e,y as l}from"./index-BwYdblA9.js";import{T as b,l as v}from"./react-confirm-alert-CIYP-H3n.js";import{m as u}from"./proxy-KUc6fMt2.js";function L(){const[m,c]=a.useState([]),[j,y]=a.useState(!0),[r,o]=a.useState(null),[g,d]=a.useState(null),[x,h]=a.useState(null);a.useEffect(()=>{i()},[]);const i=async()=>{try{const s=await n.get("/applications");s.data.data?c(s.data.data):(c([]),o(s.data.message||"No applications found"))}catch(s){o(s.response?.data?.message||s.message)}finally{y(!1)}},f=async(s,t)=>{d(s);try{await n.put(`/applications/${s}/status`,{status:t}),await i(),l.success("Application status updated successfully!")}catch(p){l.error(p.response?.data?.message||p.message)}finally{d(null)}},N=s=>{v.confirmAlert({title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"warning-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),e.jsx("span",{children:"Delete Application?"})]}),message:e.jsxs("div",{className:"custom-confirm-dialog",children:[e.jsx("p",{className:"text-gray-600",children:"Are you sure you want to permanently delete this application?"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"This action cannot be undone."})]}),buttons:[{label:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),"Delete"]}),onClick:async()=>{h(s);try{await n.delete(`/applications/${s}`),await i(),l.success("Application deleted successfully!")}catch(t){l.error(t.response?.data?.message||t.message)}finally{h(null)}}},{label:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"Cancel"]})}],closeOnEscape:!0,closeOnClickOutside:!0,overlayClassName:"confirm-overlay"})};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Manage Applications"}),j?e.jsx("p",{children:"Loading applications..."}):r?e.jsx("p",{className:"text-red-500",children:r}):e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2",children:"Name"}),e.jsx("th",{className:"py-2",children:"Email"}),e.jsx("th",{className:"py-2",children:"Job"}),e.jsx("th",{className:"py-2",children:"Date & Time"}),e.jsx("th",{className:"py-2",children:"Status"}),e.jsx("th",{className:"py-2",children:"Actions"})]})}),e.jsx("tbody",{children:m.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:s.name}),e.jsx("td",{className:"py-2",children:s.email}),e.jsx("td",{className:"py-2",children:s.jobId?.title||"N/A"}),e.jsx("td",{className:"py-2",children:new Date(s.createdAt).toLocaleString()}),e.jsx("td",{className:"py-2",children:e.jsxs(u.select,{value:s.status,onChange:t=>f(s._id,t.target.value),disabled:g===s._id,className:"border p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",whileHover:{scale:1.05},children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Accepted",children:"Accepted"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs(u.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>N(s._id),disabled:x===s._id,className:"flex items-center gap-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(b,{size:16}),x===s._id?"Deleting...":"Delete"]})})]},s._id))})]})})]})}export{L as default};
