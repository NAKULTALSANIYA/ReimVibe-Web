import{j as e,m as s,E as a,T as t}from"./ui-vendor-BxZ4Xgry.js";import{r as l}from"./react-vendor--as-ZyZY.js";import{a as r}from"./api-DMg9Yiwh.js";import{y as i}from"./util-vendor-Ik_Or1do.js";import{l as n}from"./react-confirm-alert-BemBkvux.js";import"./http-vendor-DypGwsJR.js";import"./chart-vendor-DqVrzz_A.js";function c(){const[c,d]=l.useState([]),[o,h]=l.useState(!0),[m,x]=l.useState(null),[p,j]=l.useState(!1),[u,g]=l.useState(null),[y,b]=l.useState(null);l.useEffect(()=>{f()},[]);const f=async()=>{try{const e=await r.get("/contacts");d(e.data.data||[])}catch(e){x(e.response?.data?.message||e.message)}finally{h(!1)}};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Manage Messages"}),o?e.jsx("p",{children:"Loading messages..."}):m?e.jsx("p",{className:"text-red-500",children:m}):e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2",children:"Name"}),e.jsx("th",{className:"py-2",children:"Email"}),e.jsx("th",{className:"py-2",children:"Phone"}),e.jsx("th",{className:"py-2",children:"Date"}),e.jsx("th",{className:"py-2",children:"Actions"})]})}),e.jsx("tbody",{children:c.map(l=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:l.name}),e.jsx("td",{className:"py-2",children:l.email}),e.jsx("td",{className:"py-2",children:l.phone}),e.jsx("td",{className:"py-2",children:new Date(l.createdAt).toLocaleDateString()}),e.jsxs("td",{className:"py-2 space-x-3 flex items-center gap-2",children:[e.jsxs(s.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-1 px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",onClick:()=>(g(l),void j(!0)),children:[e.jsx(a,{size:16}),"View"]}),e.jsxs(s.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{return e=l._id,void n.confirmAlert({title:"Confirm Delete",message:"Are you sure you want to delete this message?",buttons:[{label:"Yes",onClick:async()=>{b(e);try{await r.delete(`/contacts/${e}`),await f(),i.success("Message deleted successfully!")}catch(s){i.error(s.response?.data?.message||s.message)}finally{b(null)}}},{label:"No"}]});var e},disabled:y===l._id,className:"flex items-center gap-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(t,{size:16}),y===l._id?"Deleting...":"Delete"]})]})]},l._id))})]})}),p&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl w-96 shadow-lg max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Message Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",u.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",u.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",u.phone]}),e.jsx("p",{children:e.jsx("strong",{children:"Message:"})}),e.jsx("p",{className:"bg-gray-100 p-3 rounded",children:u.message}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(u.createdAt).toLocaleString()]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:()=>{j(!1),g(null)},className:"px-4 py-2 rounded-md border",children:"Close"})})]})})]})}export{c as default};
