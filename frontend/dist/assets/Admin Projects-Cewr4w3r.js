import{j as e,m as s,P as t,h as l,g as a,T as i}from"./ui-vendor-BxZ4Xgry.js";import{r}from"./react-vendor--as-ZyZY.js";import{a as o}from"./api-DMg9Yiwh.js";import{y as n}from"./util-vendor-Ik_Or1do.js";import{l as c}from"./react-confirm-alert-BemBkvux.js";import"./http-vendor-DypGwsJR.js";import"./chart-vendor-DqVrzz_A.js";function d(){const[d,m]=r.useState([]),[u,p]=r.useState(!0),[g,h]=r.useState(null),[x,j]=r.useState({title:"",description:"",image:"",link:""}),[b,f]=r.useState(!1),[v,w]=r.useState(null),[y,N]=r.useState(!1),[k,C]=r.useState(null);r.useEffect(()=>{S()},[]);const S=async()=>{try{const e=await o.get("/projects");m(e.data.data||[])}catch(e){h(e.response?.data?.message||e.message)}finally{p(!1)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Manage Projects"}),e.jsxs(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-yellow-400 text-black px-4 py-2 rounded-lg font-semibold hover:bg-yellow-300 transition-colors flex items-center gap-2",onClick:()=>{j({title:"",description:"",image:"",link:""}),w(null),f(!0)},children:[e.jsx(t,{size:16}),"Add New"]})]}),u?e.jsx("p",{children:"Loading projects..."}):g?e.jsx("p",{className:"text-red-500",children:g}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:d.map(t=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md",children:[t.image&&e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-40 object-cover rounded-md mb-3"}),e.jsx("h2",{className:"font-semibold text-lg",children:t.title}),e.jsx("p",{className:"text-gray-500 text-sm",children:t.description}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[t.link&&e.jsxs(s.a,{whileHover:{scale:1.05},href:t.link,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 font-semibold hover:underline flex items-center gap-1",children:[e.jsx(l,{size:16}),"Live"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(s.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-1 px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",onClick:()=>{return j({title:(e=t).title,description:e.description,image:e.image,link:e.link}),w(e),void f(!0);var e},children:[e.jsx(a,{size:16}),"Edit"]}),e.jsxs(s.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{return e=t._id,void c.confirmAlert({title:"Confirm Delete",message:"Are you sure you want to delete this project?",buttons:[{label:"Yes",onClick:async()=>{C(e);try{await o.delete(`/projects/${e}`),await S(),n.success("Project deleted successfully!")}catch(s){n.error(s.response?.data?.message||s.message)}finally{C(null)}}},{label:"No"}]});var e},disabled:k===t._id,children:[e.jsx(i,{size:16}),k===t._id?"Deleting...":"Delete"]})]})]})]},t._id))}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl w-96 shadow-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:v?"Edit Project":"Add New Project"}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),N(!0);try{v?(await o.put(`/projects/${v._id}`,x),n.success("Project updated successfully!")):(await o.post("/projects",x),n.success("Project added successfully!")),await S(),j({title:"",description:"",image:"",link:""}),w(null),f(!1)}catch(s){n.error(s.response?.data?.message||s.message)}finally{N(!1)}},className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Project Title",value:x.title,onChange:e=>j({...x,title:e.target.value}),className:"w-full border p-2 rounded-md",required:!0}),e.jsx("textarea",{placeholder:"Project Description",value:x.description,onChange:e=>j({...x,description:e.target.value}),className:"w-full border p-2 rounded-md",required:!0}),e.jsx("input",{type:"text",placeholder:"Image URL",value:x.image,onChange:e=>j({...x,image:e.target.value}),className:"w-full border p-2 rounded-md",required:!0}),e.jsx("input",{type:"url",placeholder:"Live Project Link",value:x.link,onChange:e=>j({...x,link:e.target.value}),className:"w-full border p-2 rounded-md",required:!0}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:()=>{f(!1),w(null),j({title:"",description:"",image:"",link:""})},className:"px-4 py-2 rounded-lg border hover:bg-gray-100 transition-colors",children:"Cancel"}),e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:y,className:"bg-yellow-400 px-6 py-2 rounded-lg font-semibold hover:bg-yellow-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Saving...":v?"Update":"Save"})]})]})]})})]})}export{d as default};
