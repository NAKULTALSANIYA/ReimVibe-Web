import{j as e,m as a}from"./ui-vendor-BxZ4Xgry.js";import{r as t}from"./react-vendor--as-ZyZY.js";import{a as s}from"./api-DMg9Yiwh.js";import{R as l,B as r,X as o,Y as n,T as d,a as c}from"./chart-vendor-DqVrzz_A.js";import"./http-vendor-DypGwsJR.js";function i(){const[i,h]=t.useState([{label:"Total Jobs",value:0},{label:"Applications",value:0},{label:"Projects",value:0},{label:"Services",value:0},{label:"Messages",value:0}]),[g,m]=t.useState([]),[p,b]=t.useState(!0),[j,u]=t.useState(null),x=["bg-yellow-100 text-yellow-800","bg-blue-100 text-blue-800","bg-green-100 text-green-800","bg-purple-100 text-purple-800","bg-red-100 text-red-800"];t.useEffect(()=>{v()},[]);const v=async()=>{try{const[e,a,t,l,r]=await Promise.all([s.get("/jobs"),s.get("/applications"),s.get("/projects"),s.get("/services"),s.get("/contacts")]),o=e.data.data||[],n=a.data.data||[],d=t.data.data||[],c=l.data.data||[],i=r.data.data||[],g=o.length,p=n.length,b=d.length,j=c.length,u=i.length;h([{label:"Total Jobs",value:g},{label:"Applications",value:p},{label:"Projects",value:b},{label:"Services",value:j},{label:"Messages",value:u}]);const x=(e,a)=>{const t={};return e.forEach(e=>{const s=new Date(e[a]),l=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`;t[l]=(t[l]||0)+1}),t},v=x(o,"createdAt"),f=x(d,"createdAt"),y=new Date,w=[];for(let s=5;s>=0;s--){const e=new Date(y.getFullYear(),y.getMonth()-s,1),a=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`,t=e.toLocaleString("default",{month:"short"});w.push({name:t,jobs:v[a]||0,projects:f[a]||0})}m(w)}catch(e){u(e.response?.data?.message||e.message)}finally{b(!1)}};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Dashboard Overview"}),p?e.jsx("p",{children:"Loading dashboard data..."}):j?e.jsx("p",{className:"text-red-500",children:j}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-10",children:i.map((t,s)=>e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},className:`p-6 rounded-xl shadow-md ${x[s%x.length]}`,children:[e.jsx("h2",{className:"text-2xl font-bold",children:t.value}),e.jsx("p",{className:"text-sm",children:t.label})]},s))}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Jobs vs Projects (Monthly)"}),e.jsx(l,{width:"100%",height:300,children:e.jsxs(r,{data:g,children:[e.jsx(o,{dataKey:"name"}),e.jsx(n,{}),e.jsx(d,{}),e.jsx(c,{dataKey:"jobs",fill:"#facc15"}),e.jsx(c,{dataKey:"projects",fill:"#3b82f6"})]})})]})]})]})}export{i as default};
