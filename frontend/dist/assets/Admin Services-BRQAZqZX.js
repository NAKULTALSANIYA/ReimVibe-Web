import{r as t,j as s,y as r}from"./index-DAMVDUDG.js";import{a as p}from"./api-BaoFEcul.js";import{T,l as k}from"./react-confirm-alert-C8_X-r1t.js";import{m as o}from"./proxy-DKL8Unjh.js";import{P as A}from"./plus-_67RXTcL.js";import{S as H}from"./square-pen-DbwkRqJD.js";function $(){const[f,b]=t.useState([]),[w,y]=t.useState(!0),[h,S]=t.useState(null),[a,i]=t.useState({title:"",description:""}),[j,c]=t.useState(!1),[n,m]=t.useState(null),[g,d]=t.useState(!1),[x,v]=t.useState(null);t.useEffect(()=>{u()},[]);const u=async()=>{try{const e=await p.get("/services");b(e.data.data||[])}catch(e){S(e.response?.data?.message||e.message)}finally{y(!1)}},N=async e=>{e.preventDefault(),d(!0);try{await p.post("/services",a),await u(),i({title:"",description:""}),c(!1),r.success("Service added successfully!")}catch(l){r.error(l.response?.data?.message||l.message)}finally{d(!1)}},E=async e=>{e.preventDefault(),d(!0);try{await p.put(`/services/${n._id}`,a),await u(),i({title:"",description:""}),m(null),c(!1),r.success("Service updated successfully!")}catch(l){r.error(l.response?.data?.message||l.message)}finally{d(!1)}},C=e=>{k.confirmAlert({title:"Confirm Delete",message:"Are you sure you want to delete this service?",buttons:[{label:"Yes",onClick:async()=>{v(e);try{await p.delete(`/services/${e}`),await u(),r.success("Service deleted successfully!")}catch(l){r.error(l.response?.data?.message||l.message)}finally{v(null)}}},{label:"No"}]})},D=e=>{i({title:e.title,description:e.description}),m(e),c(!0)};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Manage Services"}),s.jsxs(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-yellow-400 text-black px-4 py-2 rounded-lg font-semibold hover:bg-yellow-300 transition-colors flex items-center gap-2",onClick:()=>c(!0),children:[s.jsx(A,{size:16}),"Add New"]})]}),w?s.jsx("p",{children:"Loading services..."}):h?s.jsx("p",{className:"text-red-500",children:h}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:f.map(e=>s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[s.jsx("h2",{className:"font-semibold",children:e.title}),s.jsx("p",{className:"text-gray-500",children:e.description}),s.jsxs("div",{className:"mt-3 flex gap-2",children:[s.jsxs(o.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-1 px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",onClick:()=>D(e),children:[s.jsx(H,{size:16}),"Edit"]}),s.jsxs(o.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>C(e._id),disabled:x===e._id,children:[s.jsx(T,{size:16}),x===e._id?"Deleting...":"Delete"]})]})]},e._id))}),j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white p-6 rounded-xl w-96 shadow-lg",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:n?"Edit Service":"Add New Service"}),s.jsxs("form",{onSubmit:n?E:N,className:"space-y-3",children:[s.jsx("input",{type:"text",placeholder:"Service Title",value:a.title,onChange:e=>i({...a,title:e.target.value}),className:"w-full border p-2 rounded-md",required:!0}),s.jsx("textarea",{placeholder:"Service Description",value:a.description,onChange:e=>i({...a,description:e.target.value}),className:"w-full border p-2 rounded-md",required:!0}),s.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[s.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:()=>{c(!1),m(null),i({title:"",description:""})},className:"px-4 py-2 rounded-lg border hover:bg-gray-100 transition-colors",children:"Cancel"}),s.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:g,className:"bg-yellow-400 px-6 py-2 rounded-lg font-semibold hover:bg-yellow-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":n?"Update":"Save"})]})]})]})})]})}export{$ as default};
