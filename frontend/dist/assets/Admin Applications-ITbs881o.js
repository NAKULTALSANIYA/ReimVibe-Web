import{r as a,j as e,y as l}from"./index-BZVC6O8l.js";import{a as n}from"./api-BaoFEcul.js";import{T as b,l as w}from"./react-confirm-alert-WFAlNOrQ.js";import{m}from"./proxy-C5t4LknV.js";function E(){const[x,c]=a.useState([]),[j,g]=a.useState(!0),[r,d]=a.useState(null),[y,o]=a.useState(null),[u,p]=a.useState(null);a.useEffect(()=>{i()},[]);const i=async()=>{try{const s=await n.get("/applications");s.data.data?c(s.data.data):(c([]),d(s.data.message||"No applications found"))}catch(s){d(s.response?.data?.message||s.message)}finally{g(!1)}},f=async(s,t)=>{o(s);try{await n.put(`/applications/${s}/status`,{status:t}),await i(),l.success("Application status updated successfully!")}catch(h){l.error(h.response?.data?.message||h.message)}finally{o(null)}},N=s=>{w.confirmAlert({title:"Confirm Delete",message:"Are you sure you want to delete this application?",buttons:[{label:"Yes",onClick:async()=>{p(s);try{await n.delete(`/applications/${s}`),await i(),l.success("Application deleted successfully!")}catch(t){l.error(t.response?.data?.message||t.message)}finally{p(null)}}},{label:"No"}]})};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Manage Applications"}),j?e.jsx("p",{children:"Loading applications..."}):r?e.jsx("p",{className:"text-red-500",children:r}):e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2",children:"Name"}),e.jsx("th",{className:"py-2",children:"Email"}),e.jsx("th",{className:"py-2",children:"Job"}),e.jsx("th",{className:"py-2",children:"Date & Time"}),e.jsx("th",{className:"py-2",children:"Status"}),e.jsx("th",{className:"py-2",children:"Actions"})]})}),e.jsx("tbody",{children:x.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:s.name}),e.jsx("td",{className:"py-2",children:s.email}),e.jsx("td",{className:"py-2",children:s.jobId?.title||"N/A"}),e.jsx("td",{className:"py-2",children:new Date(s.createdAt).toLocaleString()}),e.jsx("td",{className:"py-2",children:e.jsxs(m.select,{value:s.status,onChange:t=>f(s._id,t.target.value),disabled:y===s._id,className:"border p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",whileHover:{scale:1.05},children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Accepted",children:"Accepted"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})}),e.jsx("td",{className:"py-2",children:e.jsxs(m.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>N(s._id),disabled:u===s._id,className:"flex items-center gap-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(b,{size:16}),u===s._id?"Deleting...":"Delete"]})})]},s._id))})]})})]})}export{E as default};
