import{r as a,j as e,y as h}from"./index-BGAwkXgt.js";import{a as x}from"./api-BaoFEcul.js";import{T as w,l as v}from"./react-confirm-alert-BojggP0Y.js";import{m}from"./proxy-DRS0civK.js";import{E as M}from"./eye-C5uXqtac.js";function A(){const[p,j]=a.useState([]),[g,u]=a.useState(!0),[l,y]=a.useState(null),[f,n]=a.useState(!1),[t,r]=a.useState(null),[c,i]=a.useState(null);a.useEffect(()=>{d()},[]);const d=async()=>{try{const s=await x.get("/contacts");j(s.data.data||[])}catch(s){y(s.response?.data?.message||s.message)}finally{u(!1)}},b=s=>{r(s),n(!0)},N=s=>{v.confirmAlert({title:"Confirm Delete",message:"Are you sure you want to delete this message?",buttons:[{label:"Yes",onClick:async()=>{i(s);try{await x.delete(`/contacts/${s}`),await d(),h.success("Message deleted successfully!")}catch(o){h.error(o.response?.data?.message||o.message)}finally{i(null)}}},{label:"No"}]})};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Manage Messages"}),g?e.jsx("p",{children:"Loading messages..."}):l?e.jsx("p",{className:"text-red-500",children:l}):e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2",children:"Name"}),e.jsx("th",{className:"py-2",children:"Email"}),e.jsx("th",{className:"py-2",children:"Phone"}),e.jsx("th",{className:"py-2",children:"Date"}),e.jsx("th",{className:"py-2",children:"Actions"})]})}),e.jsx("tbody",{children:p.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2",children:s.name}),e.jsx("td",{className:"py-2",children:s.email}),e.jsx("td",{className:"py-2",children:s.phone}),e.jsx("td",{className:"py-2",children:new Date(s.createdAt).toLocaleDateString()}),e.jsxs("td",{className:"py-2 space-x-3 flex items-center gap-2",children:[e.jsxs(m.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-1 px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",onClick:()=>b(s),children:[e.jsx(M,{size:16}),"View"]}),e.jsxs(m.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>N(s._id),disabled:c===s._id,className:"flex items-center gap-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(w,{size:16}),c===s._id?"Deleting...":"Delete"]})]})]},s._id))})]})}),f&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl w-96 shadow-lg max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Message Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",t.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",t.phone]}),e.jsx("p",{children:e.jsx("strong",{children:"Message:"})}),e.jsx("p",{className:"bg-gray-100 p-3 rounded",children:t.message}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(t.createdAt).toLocaleString()]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:()=>{n(!1),r(null)},className:"px-4 py-2 rounded-md border",children:"Close"})})]})})]})}export{A as default};
