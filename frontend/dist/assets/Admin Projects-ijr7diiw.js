import{c as L,r as a,a as u,j as e,X as G,y as r}from"./index-BwYdblA9.js";import{T as R,l as W}from"./react-confirm-alert-CIYP-H3n.js";import{m as o}from"./proxy-KUc6fMt2.js";import{P as _}from"./plus-BufHLIbn.js";import{S as O}from"./square-pen-TjvOfTBO.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],$=L("external-link",V);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],X=L("upload",J);function se(){const[E,M]=a.useState([]),[F,z]=a.useState(!0),[v,D]=a.useState(null),[l,i]=a.useState({title:"",description:"",image:"",link:""}),[I,x]=a.useState(!1),[g,w]=a.useState(null),[N,h]=a.useState(!1),[k,P]=a.useState(null),[C,p]=a.useState(!1),[S,c]=a.useState(null),[d,m]=a.useState(null),j=a.useRef(null);a.useEffect(()=>{f()},[]);const f=async()=>{try{const s=await u.get("/projects");M(s.data.data||[])}catch(s){D(s.response?.data?.message||s.message)}finally{z(!1)}},T=s=>{const t=s.target.files[0];if(t){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type)){r.error("Please select a valid image file (JPEG, PNG, GIF, or WebP)");return}if(t.size>5*1024*1024){r.error("File size must be less than 5MB");return}m(t);const b=new FileReader;b.onloadend=()=>{c(b.result)},b.readAsDataURL(t)}},H=async s=>{const t=new FormData;t.append("image",s);try{return(await u.post("/projects/upload",t,{headers:{"Content-Type":"multipart/form-data"}})).data.imageUrl}catch(n){throw new Error(n.response?.data?.message||"Failed to upload image")}},U=async s=>{s.preventDefault(),h(!0);try{let t=l.image;if(d&&(p(!0),t=await H(d),p(!1)),!t){r.error("Project image is required"),h(!1),p(!1);return}const n={...l,image:t};g?(await u.put(`/projects/${g.id}`,n),r.success("Project updated successfully!")):(await u.post("/projects",n),r.success("Project added successfully!")),await f(),y(),x(!1)}catch(t){r.error(t.response?.data?.message||t.message)}finally{h(!1),p(!1)}},y=()=>{i({title:"",description:"",image:"",link:""}),w(null),c(null),m(null)},q=s=>{i({title:s.title,description:s.description,image:s.image,link:s.link}),w(s),c(s.image),m(null),x(!0)},A=s=>{W.confirmAlert({title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"warning-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),e.jsx("span",{children:"Delete Project?"})]}),message:e.jsxs("div",{className:"custom-confirm-dialog",children:[e.jsx("p",{className:"text-gray-600",children:"Are you sure you want to permanently delete this project?"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"This action cannot be undone."})]}),buttons:[{label:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),"Delete"]}),onClick:async()=>{P(s);try{await u.delete(`/projects/${s}`),await f(),r.success("Project deleted successfully!")}catch(t){r.error(t.response?.data?.message||t.message)}finally{P(null)}}},{label:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"Cancel"]})}],closeOnEscape:!0,closeOnClickOutside:!0,overlayClassName:"confirm-overlay"})},B=()=>{m(null),c(null),i({...l,image:""}),j.current&&(j.current.value="")};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Manage Projects"}),e.jsxs(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-yellow-400 text-black px-4 py-2 rounded-lg font-semibold hover:bg-yellow-300 transition-colors flex items-center gap-2",onClick:()=>{y(),x(!0)},children:[e.jsx(_,{size:16}),"Add New"]})]}),F?e.jsx("p",{children:"Loading projects..."}):v?e.jsx("p",{className:"text-red-500",children:v}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:E.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md",children:[s.image&&e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-40 object-cover rounded-md mb-3",onError:t=>{t.target.src="https://via.placeholder.com/400x200?text=No+Image"}}),e.jsx("h2",{className:"font-semibold text-lg",children:s.title}),e.jsx("p",{className:"text-gray-500 text-sm",children:s.description}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[s.link&&e.jsxs(o.a,{whileHover:{scale:1.05},href:s.link,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 font-semibold hover:underline flex items-center gap-1",children:[e.jsx($,{size:16}),"Live"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-1 px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",onClick:()=>q(s),children:[e.jsx(O,{size:16}),"Edit"]}),e.jsxs(o.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>A(s.id),disabled:k===s.id,children:[e.jsx(R,{size:16}),k===s.id?"Deleting...":"Delete"]})]})]})]},s.id))}),I&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl w-96 shadow-lg max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:g?"Edit Project":"Add New Project"}),e.jsxs("form",{onSubmit:U,className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Project Title",value:l.title,onChange:s=>i({...l,title:s.target.value}),className:"w-full border p-2 rounded-md",required:!0}),e.jsx("textarea",{placeholder:"Project Description",value:l.description,onChange:s=>i({...l,description:s.target.value}),className:"w-full border p-2 rounded-md",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Image"}),S&&e.jsxs("div",{className:"relative mb-2",children:[e.jsx("img",{src:S,alt:"Preview",className:"w-full h-32 object-cover rounded-md"}),e.jsx("button",{type:"button",onClick:B,className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:e.jsx(G,{size:14})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",ref:j,onChange:T,accept:"image/*",className:"hidden",id:"image-upload"}),e.jsxs("label",{htmlFor:"image-upload",className:"flex items-center gap-2 px-4 py-2 bg-gray-100 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-200 transition-colors",children:[e.jsx(X,{size:16}),d?"Change Image":"Upload Image"]}),d&&e.jsx("span",{className:"text-sm text-gray-500 truncate max-w-[150px]",children:d.name})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Supported: JPEG, PNG, GIF, WebP (Max 5MB)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Or Image URL"}),e.jsx("input",{type:"text",placeholder:"https://example.com/image.jpg",value:l.image,onChange:s=>{i({...l,image:s.target.value}),c(s.target.value),m(null)},className:"w-full border p-2 rounded-md"})]}),e.jsx("input",{type:"url",placeholder:"Live Project Link",value:l.link,onChange:s=>i({...l,link:s.target.value}),className:"w-full border p-2 rounded-md"}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:()=>{x(!1),y()},className:"px-4 py-2 rounded-lg border hover:bg-gray-100 transition-colors",children:"Cancel"}),e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",disabled:N||C,className:"bg-yellow-400 px-6 py-2 rounded-lg font-semibold hover:bg-yellow-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:C?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):N?"Saving...":g?"Update":"Save"})]})]})]})})]})}export{se as default};
